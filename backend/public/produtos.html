<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Confira todos os produtos artesanais em croch√™ dispon√≠veis para compra.">
  <title>Produtos - Croch√™ da Suelem</title>
  <link rel="stylesheet" href="css/produtos.css" />
  <link rel="stylesheet" href="css/notificacao.css">
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
</head>
<body>

  <!-- Cabe√ßalho -->
  <header>
    <div class="container">
      <h1>Croch√™ da Suelem</h1>
      <nav>
        <ul>
          <li><a href="index.html">In√≠cio</a></li>
          <li><a href="#produtos">Produtos</a></li>
          <li><a href="index.html#sobre">Sobre</a></li>
          <li><a href="index.html#contato">Contato</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- P√°gina de Produtos -->
  <main class="pagina-produtos" id="produtos">

    <div class="container">
      <section class="catalogo-apresentacao">
        <div class="catalogo-texto">
          <h2>üå∏ Cat√°logo completo</h2>
          <p>
            Explore nossas pe√ßas feitas √† m√£o com muito carinho, cuidado e aten√ß√£o a cada detalhe.
            Cada cria√ß√£o √© √∫nica, inspirada na delicadeza do artesanato e pensada para encantar.
          </p>
        </div>
      </section>
<section class="filtros-categorias">
  <h2>Filtrar por Categoria</h2>
  <div class="filtros-lista">
    <button onclick="filtrarProdutos('todos')" class="ativo">Todos</button>
    <button onclick="filtrarProdutos('Blusa/cropped')">Blusa/cropped</button>
    <button onclick="filtrarProdutos('Moda praia')">Moda praia</button>
    <button onclick="filtrarProdutos('Trilho de mesa e sousplat')">Trilho de mesa e sousplat</button>
    <button onclick="filtrarProdutos('Bolsas')">Bolsas</button>
    <button onclick="filtrarProdutos('Vestido')">Vestido</button>
    <button onclick="filtrarProdutos('Tapetes')">Tapetes</button>
    <button onclick="filtrarProdutos('Outros')">Outros</button>
  </div>
</section>
      <div class="grade-produtos" id="produtos-lista"></div>
    </div>
  </main>

  <!-- Rodap√© -->
  <footer>
    <div class="container">
      <p>&copy; 2025 Croch√™ da Suelem ‚Äî Todos os direitos reservados.</p>
    </div>
  </footer>

  <!-- AOS JS -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init();</script>

  <!-- Script de Produtos Din√¢micos -->
  <script>
    fetch("https://site-croche.onrender.com/site/produtos")
      .then(res => res.json())
      .then(data => {
        const lista = document.getElementById("produtos-lista");

        if (data.sucesso) {
          data.produtos.forEach(p => {
            const imagens = JSON.parse(p.imagens || "[]");
            const imagemPrincipal = imagens[0] || "sem-imagem.jpg";
            const precoFormatado = parseFloat(p.preco).toFixed(2).replace(".", ",");

            const div = document.createElement("div");
            div.className = "produto";
            
            div.setAttribute("data-aos-delay", "200");
            div.setAttribute("data-categoria", p.categoria || "Outros"); // ‚Üê AQUI!

            div.innerHTML = `
              <img src="${imagemPrincipal}" alt="${p.nome}">
              <h3>${p.nome}</h3>
              <p>R$ ${precoFormatado}</p>

              <div class="encomenda">
                <label for="tamanho">Tamanho:</label>
                <select class="tamanho">
                  <option value="">Selecione</option>
                  ${JSON.parse(p.tamanhos || "[]").map(t => `<option value="${t}">${t}</option>`).join("")}
                </select>

                <label for="cor">Cor desejada:</label>
                <input type="text" class="cor" placeholder="Ex: Rosa, Verde, Azul...">

                <button class="botao-encomenda" onclick="encomendarProduto('${p.nome}')">
                  <img src="imagens/whatsapp-icon.svg" alt="WhatsApp">
                  Fazer encomenda via WhatsApp
                </button>
              </div>

              <a href="produto.html?id=${p.id}" class="botao-vermais">Ver mais</a>
            `;

            lista.appendChild(div);
          });
        }
      });

    function encomendarProduto(nome) {
      const produtoDiv = event.target.closest(".produto");
      const tamanho = produtoDiv.querySelector(".tamanho").value;
      const cor = produtoDiv.querySelector(".cor").value;

      let mensagem = `Oi! Vim pelo site e quero encomendar esta pe√ßa: ${nome}`;
      if (tamanho) mensagem += `\nTamanho: ${tamanho}`;
      if (cor) mensagem += `\nCor desejada: ${cor}`;

      const link = `https://wa.me/5591985725143?text=${encodeURIComponent(mensagem)}`;
      window.open(link, "_blank");
    }

function filtrarProdutos(categoria) {
  document.querySelectorAll(".filtros-lista button").forEach(btn => btn.classList.remove("ativo"));
  const botaoAtivo = [...document.querySelectorAll(".filtros-lista button")]
    .find(btn => btn.textContent === categoria || (categoria === 'todos' && btn.textContent === "Todos"));
  if (botaoAtivo) botaoAtivo.classList.add("ativo");

  document.querySelectorAll(".produto").forEach(prod => {
    const cat = prod.getAttribute("data-categoria");
    if (categoria === 'todos' || cat === categoria) {
      prod.style.display = "block";
    } else {
      prod.style.display = "none";
    }
  });
}


  </script>

  <div id="notificacoes-container"></div>
  <script src="js/notificacao.js"></script>

</body>
</html>
