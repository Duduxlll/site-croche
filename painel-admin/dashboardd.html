<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Painel de Controle - Crochê</title>
  <link rel="stylesheet" href="css/painel.css">
</head>
<body>
  <header class="painel-topo">
    <h1>Painel Administrativo</h1>
    <button id="sair-painel">Sair</button>
  </header>

  <main class="painel-conteudo">
    <section class="bloco-painel">
      <h2>🖼️ Trocar banner da página inicial</h2>
      <form id="form-banner">
        <input type="file" name="banner" accept="image/*" required>
        <button type="submit">Enviar novo banner</button>
      </form>

      <h2>➕ Adicionar novo produto</h2>
      <form id="form-produto">
        <input type="text" name="nome" placeholder="Nome do produto" required>
        <textarea name="descricao" placeholder="Descrição do produto" required></textarea>
        <input type="file" name="imagens" id="imagens" multiple accept="image/*">

        <label for="categoria-produto">Categoria:</label>
        <select id="categoria-produto" name="categoria" required>
          <option value="Camisas">Camisas</option>
          <option value="Biquínis">Biquínis</option>
          <option value="Bolsas">Bolsas</option>
          <option value="Toalhas">Toalhas</option>
          <option value="Tapetes">Tapetes</option>
          <option value="Outros">Outros</option>
        </select>

        <input type="number" name="preco" placeholder="Preço" step="0.01" required>

        <label>Tamanhos disponíveis:</label>
        <div class="checkboxes">
          <label><input type="checkbox" name="tamanhos" value="P"> P</label>
          <label><input type="checkbox" name="tamanhos" value="M"> M</label>
          <label><input type="checkbox" name="tamanhos" value="G"> G</label>
        </div>
        <button type="submit">Adicionar produto</button>
      </form>

      <h2>🧵 Produtos em Destaque</h2>
      <p>Escolha os 3 produtos que você quer exibir na página inicial do site:</p>
      <div id="lista-destaques"></div>

      <h2>🗑️ Remover produtos existentes</h2>
      <div id="lista-produtos"></div>

      <h2>📏 Gerenciar tamanhos disponíveis</h2>
      <form id="form-tamanho">
        <input type="text" name="nome" placeholder="Novo tamanho (ex: PP, GG...)" required>
        <button type="submit">Adicionar tamanho</button>
      </form>
      <div id="lista-tamanhos"></div>

      <h2>📤 Exportar catálogo</h2>
      <button id="btn-exportar">Exportar produtos (.csv)</button>
    </section>
  </main>

  <!-- Modal de Edição -->
  <div id="modal-edicao" class="modal hidden">
    <div class="modal-content">
      <h3>Editar Produto</h3>
      <input id="editar-nome" type="text" placeholder="Nome">
      <textarea id="editar-descricao" placeholder="Descrição"></textarea>
      <input id="editar-preco" type="number" placeholder="Preço">
      <input id="editar-tamanhos" type="text" placeholder="Tamanhos">

      <select id="editar-categoria">
        <option value="Camisas">Camisas</option>
        <option value="Biquínis">Biquínis</option>
        <option value="Bolsas">Bolsas</option>
        <option value="Toalhas">Toalhas</option>
        <option value="Tapetes">Tapetes</option>
        <option value="Outros">Outros</option>
      </select>

      <button id="salvar-edicao">Salvar alterações</button>
      <button id="cancelar-edicao">Cancelar</button>
      <button id="fechar-modal">×</button>
    </div>
  </div>

  <div id="notificacoes-container"></div>

  <script src="../js/notificacao.js"></script>
  <script src="js/dashboard.js"></script>
  <script>
    if (!localStorage.getItem("admin")) window.location.href = "login.html";
  </script>
  <script>
  // Criar sistema de abas baseado em blocos existentes
  const secoes = document.querySelectorAll("section.bloco-painel");
  const main = document.querySelector("main");

  // Criar container de navegação
  const nav = document.createElement("div");
  nav.classList.add("abas-nav");

  secoes.forEach((secao, i) => {
    const titulo = secao.querySelector("h2");
    const nome = titulo ? titulo.textContent.replace(/[^a-zA-Z0-9]/g, "") : `Aba${i+1}`;
    const botao = document.createElement("button");
    botao.textContent = titulo.textContent;
    botao.dataset.index = i;

    botao.addEventListener("click", () => {
      document.querySelectorAll(".aba").forEach(div => div.classList.remove("ativa"));
      document.querySelectorAll(".abas-nav button").forEach(btn => btn.classList.remove("ativo"));
      document.getElementById(`aba-${i}`).classList.add("ativa");
      botao.classList.add("ativo");
    });

    nav.appendChild(botao);

    // Empacotar cada seção como uma aba
    const aba = document.createElement("div");
    aba.classList.add("aba");
    aba.id = `aba-${i}`;
    aba.appendChild(secao);
    main.appendChild(aba);
  });

  main.prepend(nav);

  // Ativar a primeira aba por padrão
  document.querySelector(".abas-nav button").click();
</script>

</body>
</html>
